<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="cn.hellyuestc.caiyuan.dao.QuestionDao"> 

	<select id="listNewQuestionByGmtModified" resultType="Question">
		select id, user_id, topic_id, title, content, scan_count, answer_count, gmt_create, gmt_modified
		from question
		where gmt_modified > #{time}
		limit #{count}
	</select>
	
	<select id="listNextQuestionByGmtModified" resultType="Question">
		select id, user_id, topic_id, title, content, scan_count, answer_count, gmt_create, gmt_modified
		from question
		where gmt_modified &lt;= #{time}
		order by gmt_modified desc
		limit #{count}
	</select>
	
	<select id="listNewQuestionByGmtModifiedAndId" resultType="Question">
		select id, user_id, topic_id, title, content, scan_count, answer_count, gmt_create, gmt_modified
		from question
		where gmt_modified > #{time} and
		topic_id in (
			select topic_id from user_concern_topic where user_id=#{id}
		)
		limit #{count}
	</select>
	
	<select id="listNextQuestionByGmtModifiedAndId" resultType="Question">
		select id, user_id, topic_id, title, content, scan_count, answer_count, gmt_create, gmt_modified
		from question
		where gmt_modified &lt;= #{time} and
		topic_id in (
			select topic_id from user_concern_topic where user_id=#{id}
		)
		order by gmt_modified desc
		limit #{count}
	</select>
		
</mapper>
